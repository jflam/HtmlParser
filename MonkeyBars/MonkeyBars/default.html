<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>MonkeyBars</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0.RC/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0.RC/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0.RC/js/ui.js"></script>

    <!-- MonkeyBars references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>

    <script src="/lib/wl.js"></script>
    <link rel="stylesheet" href="/lib/codemirror.css">
    <link rel="stylesheet" href="/lib/theme/lesser-dark.css">
    <script src="/lib/codemirror.js"></script>
    <script src="/lib/modes/javascript.js"></script>
    <style type="text/css">
        .CodeMirror {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>monkey<span style="font-family: 'Segoe UI'; font-weight: bolder">bars</span></h1>
    <textarea id="code">add = function(x, y) { return x + y; }</textarea>
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            matchBrackets: true,
            indentUnit: 4,
            theme: 'lesser-dark',
            keyMap: 'repl',
        });
        CodeMirror.keyMap.repl = {
            'Ctrl-S': function (cm) {
                var text = editor.getValue();
                WinJS.Application.save_file_locally(text);
            },
            'Ctrl-O': function (cm) {
                var text = WinJS.Application.load_file_locally().then(function (text) {
                    editor.setValue(text);
                });
            },
            fallthrough: ["default"],
        };
    </script>
</body>
</html>
